<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <!-- FORM VIEW | Carpooling form view definition -->
    <record id="carpooling_view_form" model="ir.ui.view">
        <field name="name">carpooling.carpooling.view.form</field> <!-- View name -->
        <field name="model">carpooling.carpooling</field> <!-- Associated model -->
        <field name="arch" type="xml">
            <form string="Carpooling"> <!-- Form title -->
                <group> <!-- Group for main fields -->
                    <field name="name" /> <!-- Carpool name -->
                    <field name="taken_seats" /> <!-- Number of taken seats -->
                    <field name="state" invisible="1" /> <!-- State -->
                    <field name="company_currency" invisible="1" />
                    <field name="amount_per_km" options="{'currency_field': 'company_currency'}" />
                    <field name="km" />
                    <field name="cost" />
                    <field name="image" widget="image" />
                    <field name="car_id" />
                    <field name="tag_ids" widget="many2many_tags" />
                    <field name="brand" />
                </group>
                <notebook> <!-- Tabs for additional information -->
                    <page name="details" string="Details"> <!-- Details tab -->
                        <group>
                            <field name="departure_time"/> <!-- Departure time -->
                            <field name="departure_date"/> <!-- Departure date -->
                        </group>
                    </page>

                    <page name="other_informations" string="Other informations"> <!-- Additional info tab -->
                        <group>
                            <field name="note" /> <!-- Notes field -->
                            <field name="resume" />
                        </group>
                    </page>
                </notebook>
            </form>
        </field>
    </record>

    <!-- TREE VIEW | Carpooling tree view definition -->
    <!-- In Odoo 18, the <tree> tag has been replaced by <list> tag -->
    <record id="carpooling_view_tree" model="ir.ui.view">
        <field name="name">carpooling.carpooling.view.tree</field> <!-- View name -->
        <field name="model">carpooling.carpooling</field> <!-- Associated model -->
        <field name="arch" type="xml">
            <list string="Carpooling"> <!-- Tree view definition -->
                <field name="car_id" />
                <field name="name" /> <!-- Carpool name -->
                <field name="taken_seats" width="100" /> <!-- Number of taken seats -->
                <field name="departure_date" /> <!-- Departure date -->
                <field name="state" /> <!-- State -->
                <field name="company_currency" invisible="1" />
                <field name="cost" />
                <field name="tag_ids" widget="many2many_tags" />
            </list>
        </field>
    </record>

    <!-- KANBAN VIEW | Carpooling kanban view definition for carpooling.carpooling model -->
    <record id="carpooling_view_kanban" model="ir.ui.view">
        <field name="name">carpooling.carpooling.view.kanban</field> <!-- View name -->
        <field name="model">carpooling.carpooling</field> <!-- Associated model -->
        <field name="arch" type="xml">
            <kanban> <!-- Kanban view structure -->
                <templates>
                    <t t-name="card" class="flex-row">
                        <aside class="o_kanban_aside_full">
                            <div class="o_kanban_image_fill w-100">
                                <field 
                                    name="image" 
                                    widget="image" 
                                    class="o_kanban_image" 
                                    options="{'zoom': 1, 'img_class': 'object-fit-contain w-100'}"
                                />
                            </div>
                        </aside>
                        <main class="ps-2 ps-md-0">
                            <div class="d-flex justify-content-between align-items-center">
                                <field name="car_id" class="mb-0 fw-bold fs-5" />
                                <field name="departure_date" class="text" />
                            </div>

                            <field name="company_currency" invisible="1" />
                            <field name="cost" class="text-muted" />
                            <field name="state" />
                        </main>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Action to open carpooling records -->
    <record id="carpool_action" model="ir.actions.act_window"> 
        <field name="name">Find Carpool</field> <!-- Action name -->
        <field name="res_model">carpooling.carpooling</field> <!-- Target model -->
        <field name="view_mode">list,form,kanban</field> <!-- Available views, use : tree, form, kanban -->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Create new carpooling record. <!-- Help text -->
            </p>
        </field>
    </record>
</odoo>
